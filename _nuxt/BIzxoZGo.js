import{_ as W}from"./YQEpQ6jr.js";import Q from"./Q5CQnW-L.js";import{_ as X}from"./qbD92c4o.js";import{_ as Y}from"./BAAqfIkt.js";import{j as T,m as Z,p as K,q as b,s as k,v as A,x as ee,y as te,z as M,A as H,i as ae,B as x,C as se,D as ne,E as oe,l as v,G as re,H as ce,e as ie,I as le,J as ue,u as de,c as P,b as C,f as L,a as p,d as N,F as S,r as z,t as E,o as w,w as I,g as fe,_ as _e}from"./BX_ooAjd.js";import{u as me,a as he}from"./v3fMqMzk.js";const ye={trailing:!0};function ve(e,t=25,l={}){if(l={...ye,...l},!Number.isFinite(t))throw new TypeError("Expected `wait` to be a finite number");let o,a,i=[],n,h;const _=(y,c)=>(n=pe(e,y,c),n.finally(()=>{if(n=null,l.trailing&&h&&!a){const D=_(y,h);return h=null,D}}),n);return function(...y){return n?(l.trailing&&(h=y),n):new Promise(c=>{const D=!a&&l.leading;clearTimeout(a),a=setTimeout(()=>{a=null;const m=l.leading?o:_(this,y);for(const r of i)r(m);i=[]},t),D?(o=_(this,y),c(o)):i.push(c)})}}async function pe(e,t,l){return await e.apply(t,l)}const De=e=>e==="defer"||e===!1;function ge(...e){var r;const t=typeof e[e.length-1]=="string"?e.pop():void 0;G(e[0],e[1])&&e.unshift(t);let[l,o,a={}]=e;const i=T(()=>Z(l));if(typeof i.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof o!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const n=K();a.server??(a.server=!0),a.default??(a.default=we),a.getCachedData??(a.getCachedData=q),a.lazy??(a.lazy=!1),a.immediate??(a.immediate=!0),a.deep??(a.deep=b.deep),a.dedupe??(a.dedupe="cancel"),a._functionName,n._asyncData[i.value];const h={cause:"initial",dedupe:a.dedupe};(r=n._asyncData[i.value])!=null&&r._init||(h.cachedData=a.getCachedData(i.value,n,{cause:"initial"}),n._asyncData[i.value]=$(n,i.value,o,a,h.cachedData));const _=n._asyncData[i.value];_._deps++;const y=()=>n._asyncData[i.value].execute(h),c=a.server!==!1&&n.payload.serverRendered;{let s=function(d){const f=n._asyncData[d];f!=null&&f._deps&&(f._deps--,f._deps===0&&(f==null||f._off()))};const u=k();if(u&&c&&a.immediate&&!u.sp&&(u.sp=[]),u&&!u._nuxtOnBeforeMountCbs){u._nuxtOnBeforeMountCbs=[];const d=u._nuxtOnBeforeMountCbs;A(()=>{d.forEach(f=>{f()}),d.splice(0,d.length)}),ee(()=>d.splice(0,d.length))}const g=u&&(u._nuxtClientOnly||te(re,!1));c&&n.isHydrating&&(_.error.value||_.data.value!=null)?(_.pending.value=!1,_.status.value=_.error.value?"error":"success"):u&&(!g&&n.payload.serverRendered&&n.isHydrating||a.lazy)&&a.immediate?u._nuxtOnBeforeMountCbs.push(y):a.immediate&&y();const B=ce();if(a.watch){const d=M(a.watch,()=>{_._execute({cause:"watch",dedupe:a.dedupe})},{flush:"post"});B&&H(()=>d())}const O=M(i,(d,f)=>{var R,F;const J=((R=n._asyncData[f])==null?void 0:R.data.value)!==b.value;f&&s(f);const j={cause:"initial",dedupe:a.dedupe};(F=n._asyncData[d])!=null&&F._init||(j.cachedData=a.getCachedData(d,n,{cause:"initial"}),n._asyncData[d]=$(n,d,o,a,j.cachedData)),n._asyncData[d]._deps++,(a.immediate||J)&&n._asyncData[d].execute(j)},{flush:"sync"});B&&H(()=>{O(),s(i.value)})}const D={data:V(()=>{var s;return(s=n._asyncData[i.value])==null?void 0:s.data}),pending:V(()=>{var s;return(s=n._asyncData[i.value])==null?void 0:s.pending}),status:V(()=>{var s;return(s=n._asyncData[i.value])==null?void 0:s.status}),error:V(()=>{var s;return(s=n._asyncData[i.value])==null?void 0:s.error}),refresh:(...s)=>n._asyncData[i.value].execute(...s),execute:(...s)=>n._asyncData[i.value].execute(...s),clear:()=>U(n,i.value)},m=Promise.resolve(n._asyncDataPromises[i.value]).then(()=>D);return Object.assign(m,D),m}function V(e){return T({get(){var t;return(t=e())==null?void 0:t.value},set(t){const l=e();l&&(l.value=t)}})}function be(...e){const t=typeof e[e.length-1]=="string"?e.pop():void 0;G(e[0],e[1])&&e.unshift(t);const[l,o,a={}]=e;return ge(l,o,{...a,lazy:!0},null)}function G(e,t){return!(typeof e=="string"||typeof e=="object"&&e!==null||typeof e=="function"&&typeof t=="function")}function U(e,t){t in e.payload.data&&(e.payload.data[t]=void 0),t in e.payload._errors&&(e.payload._errors[t]=b.errorValue),e._asyncData[t]&&(e._asyncData[t].data.value=void 0,e._asyncData[t].error.value=b.errorValue,e._asyncData[t].pending.value=!1,e._asyncData[t].status.value="idle"),t in e._asyncDataPromises&&(e._asyncDataPromises[t]&&(e._asyncDataPromises[t].cancelled=!0),e._asyncDataPromises[t]=void 0)}function Ce(e,t){const l={};for(const o of t)l[o]=e[o];return l}function $(e,t,l,o,a){var D;(D=e.payload._errors)[t]??(D[t]=b.errorValue);const i=o.getCachedData!==q,n=l,h=o.deep?ae:x,_=a!=null,y=e.hook("app:data:refresh",async m=>{(!m||m.includes(t))&&await c.execute({cause:"refresh:hook"})}),c={data:h(_?a:o.default()),pending:x(!_),error:se(e.payload._errors,t),status:x("idle"),execute:(m={})=>{if(e._asyncDataPromises[t]){if(De(m.dedupe??o.dedupe))return e._asyncDataPromises[t];e._asyncDataPromises[t].cancelled=!0}if(m.cause==="initial"||e.isHydrating){const s="cachedData"in m?m.cachedData:o.getCachedData(t,e,{cause:m.cause??"refresh:manual"});if(s!=null)return e.payload.data[t]=c.data.value=s,c.error.value=b.errorValue,c.status.value="success",Promise.resolve(s)}c.pending.value=!0,c.status.value="pending";const r=new Promise((s,u)=>{try{s(n(e))}catch(g){u(g)}}).then(async s=>{if(r.cancelled)return e._asyncDataPromises[t];let u=s;o.transform&&(u=await o.transform(s)),o.pick&&(u=Ce(u,o.pick)),e.payload.data[t]=u,c.data.value=u,c.error.value=b.errorValue,c.status.value="success"}).catch(s=>{if(r.cancelled)return e._asyncDataPromises[t];c.error.value=oe(s),c.data.value=v(o.default()),c.status.value="error"}).finally(()=>{r.cancelled||(c.pending.value=!1,delete e._asyncDataPromises[t])});return e._asyncDataPromises[t]=r,e._asyncDataPromises[t]},_execute:ve((...m)=>c.execute(...m),0,{leading:!0}),_default:o.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{y(),c._init=!1,i||ne(()=>{c._init||(U(e,t),c.execute=()=>Promise.resolve(),c.data.value=b.value)})}};return c}const we=()=>b.value,q=(e,t,l)=>{if(t.isHydrating)return t.payload.data[e];if(l.cause!=="refresh:manual"&&l.cause!=="refresh:hook")return t.static.data[e]},Pe={class:"home-page"},Te={key:0,class:"home-section"},Be={class:"home-section__header"},Ee={class:"home-section__title"},Oe={class:"home-section__header"},Ne={class:"home-section__title"},Ve={key:1,class:"home-empty"},je={class:"home-cta"},xe={class:"home-cta__content"},Me={class:"home-cta__title"},Re={class:"home-cta__description"},Fe={class:"home-cta__buttons"},He=ie({__name:"index",async setup(e){let t,l;const o=le(),{content:a,loading:i,error:n}=me();he();const h=T(()=>Object.fromEntries(Object.entries(o.platform.contentTypes).filter(([r,s])=>s.enabled))),_=T(()=>a.value.filter(r=>r.featured).slice(0,8)),y=r=>{const u={games:"game",tools:"tool"}[r]||r;return a.value.filter(g=>g.type===u&&!g.featured).slice(0,4)},c=T(()=>{const r=Object.keys(h.value);return r.length===1?`Discover More ${h.value[r[0]].label}`:"Discover More Content"}),D=T(()=>{const r=Object.keys(h.value);return r.includes("games")&&r.includes("tools")?"Explore our collection of games and tools, all free to use!":r.includes("games")?"Play more amazing games, no downloads required!":r.includes("tools")?"Find the perfect tools for your projects!":"Browse our full collection of content"}),{data:m}=([t,l]=ue(async()=>be("homepage-content",async()=>{try{const r=await $fetch("/data/content.json");return(r==null?void 0:r.content)||[]}catch(r){return console.error("Error loading content for homepage:",r),[]}})),t=await t,l(),t);return M(m,r=>{r&&r.length>0&&(a.value=r)},{immediate:!0}),de({title:o.platform.seo.defaultTitle,meta:[{name:"description",content:o.platform.seo.defaultDescription},{property:"og:title",content:o.platform.seo.defaultTitle},{property:"og:description",content:o.platform.seo.defaultDescription},{property:"og:image",content:o.platform.seo.defaultImage},{name:"twitter:title",content:o.platform.seo.defaultTitle},{name:"twitter:description",content:o.platform.seo.defaultDescription},{name:"twitter:image",content:o.platform.seo.defaultImage},{name:"twitter:card",content:"summary_large_image"}]}),(r,s)=>{const u=W,g=Q,B=X,O=Y;return w(),P("div",Pe,[C(u),v(_).length>0?(w(),P("section",Te,[p("div",Be,[p("h2",Ee,[C(g,{name:"mdi:star",class:"text-yellow-500"}),s[0]||(s[0]=N(" Featured "))])]),C(B,{items:v(_),"items-per-page":8,loading:v(i),error:v(n)},null,8,["items","loading","error"])])):L("",!0),(w(!0),P(S,null,z(v(h),(d,f)=>(w(),P("section",{key:f,class:"home-section"},[p("div",Oe,[p("h2",Ne,[p("span",null,E(d.icon),1),N(" Latest "+E(d.label),1)]),C(O,{to:d.path,class:"home-section__link"},{default:I(()=>[s[1]||(s[1]=N(" View all ")),C(g,{name:"mdi:arrow-right"})]),_:2,__:[1]},1032,["to"])]),C(B,{items:y(f),"items-per-page":4,loading:v(i),error:v(n)},null,8,["items","loading","error"])]))),128)),!v(i)&&v(a).length===0?(w(),P("div",Ve,[C(g,{name:"mdi:package-variant-closed",class:"home-empty__icon"}),s[2]||(s[2]=p("h3",{class:"home-empty__title"},"No content available yet",-1)),s[3]||(s[3]=p("p",{class:"home-empty__description"},"Check back soon for new games and tools!",-1))])):L("",!0),p("section",je,[p("div",xe,[p("h2",Me,E(v(c)),1),p("p",Re,E(v(D)),1),p("div",Fe,[(w(!0),P(S,null,z(v(h),(d,f)=>(w(),fe(O,{key:f,to:d.path,class:"home-cta__button"},{default:I(()=>[N(" Browse "+E(d.label),1)]),_:2},1032,["to"]))),128))])])])])}}}),Ue=_e(He,[["__scopeId","data-v-4ddfb5cc"]]);export{Ue as default};
